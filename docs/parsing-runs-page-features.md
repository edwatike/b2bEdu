# –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ parsing-runs/[runId]

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: Merge –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã (09.02.2026)

**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Ñ–∞–π–ª–µ `page.tsx` –±—ã–ª–∏ Git merge conflict markers, –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ —Å–±–æ—Ä–∫—É.

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤ —Å—Ç—Ä–æ–∫–∞—Ö 2087-2095 (innSourceUrl/emailSourceUrl)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤ —Å—Ç—Ä–æ–∫–∞—Ö 2164-2171 (learned badge)
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `React` –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è TypeScript –æ—à–∏–±–∫–∏ —Å `React.Fragment`

**–§–∞–π–ª—ã:**
- `D:\b2b\frontend\moderator-dashboard-ui\app\parsing-runs\[runId]\page.tsx`
- `C:\Users\admin\.windsurf\worktrees\b2b\b2b-1ea88ed4\frontend\moderator-dashboard-ui\app\parsing-runs\[runId]\page.tsx`

---

## üìã –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. **–ü–æ–∫–∞–∑ URL –≥–¥–µ –Ω–∞–π–¥–µ–Ω—ã –ò–ù–ù/Email**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –†—è–¥–æ–º —Å –Ω–∞–π–¥–µ–Ω–Ω—ã–º –ò–ù–ù –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ üîó –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É, –≥–¥–µ –æ–Ω –±—ã–ª –Ω–∞–π–¥–µ–Ω
- –†—è–¥–æ–º —Å –Ω–∞–π–¥–µ–Ω–Ω—ã–º Email –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ üîó –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É, –≥–¥–µ –æ–Ω –±—ã–ª –Ω–∞–π–¥–µ–Ω
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `innSourceUrl` –∏ `emailSourceUrl` –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–∞—Ä—Å–µ—Ä–∞

**–ö–æ–¥:**
```tsx
const innSourceUrl = (r as any).innSourceUrl || extLog?.find(e => e.inn_found)?.url
const emailSourceUrl = (r as any).emailSourceUrl || extLog?.find(e => e.emails_found && e.emails_found.length > 0)?.url

{innSourceUrl && (
  <a href={innSourceUrl} target="_blank" rel="noopener noreferrer" className="text-blue-500 hover:text-blue-700" title={innSourceUrl}>
    üîó
  </a>
)}
```

---

### 2. **–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö URL**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–µ–Ω–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–π—Å—è –±–ª–æ–∫ `<details>` —Å –ø–æ–ª–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –ø–æ—Å–µ—â—ë–Ω–Ω—ã—Ö URL
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü —Å –ò–ù–ù (üìã), Email (üìß) –∏ –æ—à–∏–±–∫–∞–º–∏ (‚ö†)
- –í—Å–µ URL –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã –∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ

**–ö–æ–¥:**
```tsx
<details className="cursor-pointer">
  <summary className="text-slate-500 text-[10px] hover:text-blue-600">
    {r.sourceUrls?.length || 0} —Å—Ç—Ä.
    {pagesWithInn > 0 && <span className="text-blue-600 ml-1">üìã{pagesWithInn}</span>}
    {pagesWithEmail > 0 && <span className="text-emerald-600 ml-1">üìß{pagesWithEmail}</span>}
    {pagesWithError > 0 && <span className="text-red-500 ml-1">‚ö†{pagesWithError}</span>}
  </summary>
  <div className="mt-1 p-1 bg-slate-100 rounded text-[9px] max-h-[100px] overflow-y-auto">
    {r.sourceUrls && r.sourceUrls.length > 0 ? (
      r.sourceUrls.map((url, ui) => (
        <div key={ui} className="truncate">
          <a href={url} target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline" title={url}>
            {url.replace(/^https?:\/\//, '').slice(0, 50)}{url.length > 60 ? '‚Ä¶' : ''}
          </a>
        </div>
      ))
    ) : <span className="text-slate-400">–ù–µ—Ç URL</span>}
  </div>
</details>
```

---

### 3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (—á–µ—Ä–µ–∑ API)

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ backend API
- –ü–æ—Å–ª–µ F5 –¥–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `getDomainParserStatus(runId)`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è React Query –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–ö–æ–¥:**
```tsx
const { data: parserStatus, isLoading: parserLoading, refetch: refetchParser } = useDomainParserStatus(runId)
```

---

### 4. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ "–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤"**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –î–æ–º–µ–Ω —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º, –∫–æ–≥–¥–∞ –µ–º—É –ø—Ä–∏—Å–≤–æ–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç/—Å—Ç–∞—Ç—É—Å (–ø–æ—Å—Ç–∞–≤—â–∏–∫/—Ä–µ—Å–µ–ª–ª–µ—Ä/blacklist)
- –õ–æ–≥–∏–∫–∞ –ø–æ–¥—Å—á—ë—Ç–∞: `processedDomains = totalDomains - (queuedDomains + processingDomains)`
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ UI: "–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–æ–º–µ–Ω–æ–≤: X –∏–∑ Y"

**–ö–æ–¥:**
```tsx
const processedDomains = parserStatus.totalDomains - (parserStatus.queuedDomains + parserStatus.processingDomains)

<p className="text-sm text-slate-600">
  –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–æ–º–µ–Ω–æ–≤: <strong>{processedDomains}</strong> –∏–∑ <strong>{parserStatus.totalDomains}</strong>
</p>
```

---

### 5. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "–æ–±—É—á–∏–ª—Å—è" –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –ï—Å–ª–∏ –ø–∞—Ä—Å–µ—Ä –≤ –Ω–æ–≤–æ–º –ø—Ä–æ–≥–æ–Ω–µ –Ω–∞—à—ë–ª –ò–ù–ù/Email, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–Ω—å—à–µ –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –±–µ–π–¥–∂ "üìö –æ–±—É—á–∏–ª—Å—è"
- Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–ª–∞–≥ `learned: true` –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞
- –ë–µ–π–¥–∂ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä—è–¥–æ–º —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–ö–æ–¥:**
```tsx
{(r as any).learned && (
  <span className="ml-2 inline-flex items-center rounded bg-purple-50 border border-purple-200 px-1.5 py-0.5 text-[10px] text-purple-700">
    üìö –æ–±—É—á–∏–ª—Å—è
  </span>
)}
```

---

### 6. **–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –¥–æ–º–µ–Ω–æ–≤ "—Ç—Ä–µ–±—É—é—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏"**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø—É—Å—Ç–∏—Ç—å Domain Parser" –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä –¥–ª—è –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤ –≤ –ø—Ä–æ–≥–æ–Ω–µ
- –í–∫–ª—é—á–∞—è –¥–æ–º–µ–Ω—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "—Ç—Ä–µ–±—É—é—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏"
- Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –¥–æ–º–µ–Ω—ã –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∞—Ä—Å–∏—Ç—å

**–ö–æ–¥:**
```tsx
<Button onClick={handleStartDomainParser} disabled={parsingInProgress}>
  {parsingInProgress ? "–ü–∞—Ä—Å–∏–Ω–≥..." : "–ó–∞–ø—É—Å—Ç–∏—Ç—å Domain Parser"}
</Button>
```

---

## üéì –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –°–µ–∫—Ü–∏—è "–û–±—É—á–µ–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞"
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- –û—Ç–¥–µ–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á–µ–º—É –Ω–∞—É—á–∏–ª—Å—è Domain Parser
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã—É—á–µ–Ω–Ω–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
  - –î–æ–º–µ–Ω
  - –ù–∞–π–¥–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–ò–ù–ù/Email)
  - –û–ø–∏—Å–∞–Ω–∏–µ –æ–±—É—á–µ–Ω–∏—è
  - –ò—Å—Ç–æ—á–Ω–∏–∫–∏ (URL)
  - –í—ã—É—á–µ–Ω–Ω—ã–µ URL –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è: –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã—É—á–µ–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

**–ö–æ–¥:**
```tsx
{learnedItems.length > 0 && (
  <div>
    <h4 className="font-semibold text-sm mb-2 flex items-center gap-2">
      üéì –û–±—É—á–µ–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞ ‚Äî –ß–µ–º—É –Ω–∞—É—á–∏–ª—Å—è Domain Parser
    </h4>
    <Accordion type="multiple" className="w-full">
      {learnedItems.map((item, idx) => (
        <AccordionItem key={`learned-${idx}`} value={`learned-${idx}`}>
          {/* ... –¥–µ—Ç–∞–ª–∏ –æ–±—É—á–µ–Ω–∏—è ... */}
        </AccordionItem>
      ))}
    </Accordion>
  </div>
)}
```

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä—Å–µ—Ä–∞ (09.02.2026)

### 7. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ extractionLog –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ F5 –∏–ª–∏ –æ—á–∏—Å—Ç–∫–∏ localStorage, UI –ø–æ–∫–∞–∑—ã–≤–∞–ª "–±–µ–∑ –¥–∞–Ω–Ω—ã—Ö" –¥–ª—è –¥–æ–º–µ–Ω–æ–≤, —Ö–æ—Ç—è extractionLog –±—ã–ª —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ localStorage.

**–ü—Ä–∏—á–∏–Ω–∞:** Race condition ‚Äî `loadData` –≤—ã–∑—ã–≤–∞–ª—Å—è –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ React state `parserResultsMap` –æ–±–Ω–æ–≤–ª—è–ª—Å—è –∏–∑ localStorage —á–µ—Ä–µ–∑ useEffect.

**–†–µ—à–µ–Ω–∏–µ:** `loadData` —Ç–µ–ø–µ—Ä—å –Ω–∞–ø—Ä—è–º—É—é —á–∏—Ç–∞–µ—Ç localStorage –≤ `restoredParserMap`, –º–∏–Ω—É—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ React state.

**–§–∞–π–ª:** `app/parsing-runs/[runId]/page.tsx` (—Å—Ç—Ä–æ–∫–∏ 700-730)

---

### 8. **Graceful –æ–±—Ä–∞–±–æ—Ç–∫–∞ 409 Conflict –ø—Ä–∏ auto-save**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤, –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –ò–ù–ù –≤—ã–∑—ã–≤–∞–ª 409 –æ—à–∏–±–∫—É –∏ –ø—Ä–µ—Ä—ã–≤–∞–ª –ø—Ä–æ—Ü–µ—Å—Å.

**–†–µ—à–µ–Ω–∏–µ:** 409 Conflict —Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è gracefully ‚Äî –¥–æ–º–µ–Ω –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è, —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π supplier_id –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ –æ—Ç–≤–µ—Ç–∞ –∏ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.

**–§–∞–π–ª:** `app/parsing-runs/[runId]/page.tsx` (—Å—Ç—Ä–æ–∫–∏ 578-597)

---

### 9. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TypeScript regex /s flag**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ü—Ä–æ–±–ª–µ–º–∞:** Regex —Å —Ñ–ª–∞–≥–æ–º `/s` (dotAll) –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ target < ES2018, —á—Ç–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–æ —Å–±–æ—Ä–∫—É.

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω—ë–Ω `/\{.*\}/s` –Ω–∞ `/\{[\s\S]*\}/` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –î–∞—à–±–æ—Ä–¥ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞ ‚Äî ¬´–û—á–µ—Ä–µ–¥—å –æ–±—Ä–∞–±–æ—Ç–∫–∏¬ª (09.02.2026)

### 10. **–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –±–ª–æ–∫–∞ ¬´–¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞¬ª ‚Üí ¬´–û—á–µ—Ä–µ–¥—å –æ–±—Ä–∞–±–æ—Ç–∫–∏¬ª**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –±—ã–ª–æ:** –ë–ª–æ–∫ –ø–æ–∫–∞–∑—ã–≤–∞–ª –æ–¥–Ω—É —Ç–µ–∫—É—â—É—é –∑–∞–¥–∞—á—É —Å –∫—Ä—É–∂–∫–∞–º–∏ –¥–æ–º–µ–Ω–æ–≤ –∏ –∫–Ω–æ–ø–∫–æ–π ¬´–ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É¬ª.

**–ß—Ç–æ —Å—Ç–∞–ª–æ:**
- **–°–ø–∏—Å–æ–∫ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤** ‚Äî –≤—Å–µ parsing runs —Å –¥–æ–º–µ–Ω–∞–º–∏ –≤ —Å—Ç–∞—Ç—É—Å–µ `pending`/`processing`
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
  - –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–∂–∏–¥–∞—é—â–∏—Ö, –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤, –ø–µ—Ä–µ–∫—É–ø—â–∏–∫–æ–≤, –º–æ–¥–µ—Ä–∞—Ü–∏–∏
  - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä (–æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ/–≤—Å–µ–≥–æ)
  - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–µ—Ä–∞
  - –ë–µ–π–¥–∂ ¬´–°–ª–µ–¥—É—é—â–∏–π¬ª –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤ –æ—á–µ—Ä–µ–¥–∏
- **–ö–Ω–æ–ø–∫–∞ ¬´–í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å¬ª** ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ run, –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É
- –ö—Ä—É–∂–∫–∏ –¥–æ–º–µ–Ω–æ–≤ —Ç–µ–∫—É—â–µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ run (–∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤–∏–¥, –¥–æ 30 —à—Ç—É–∫)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è

**–§–∞–π–ª—ã:**
- Frontend: `components/current-task-block.tsx`
- Hooks: `hooks/queries/current-task.ts`
- API: `lib/api.ts`

---

### 11. **–ù–æ–≤—ã–µ backend endpoints**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

#### `GET /moderator/unprocessed-runs`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ parsing runs —Å –¥–æ–º–µ–Ω–∞–º–∏ –±–µ–∑ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞.

**–û—Ç–≤–µ—Ç:**
```json
{
  "runs": [
    {
      "run_id": "uuid",
      "status": "completed",
      "created_at": "2026-02-08T19:16:22",
      "keyword": "–º–∏–Ω–µ—Ä–∞–ª—å–Ω–∞—è –≤–∞—Ç–∞ –æ–ø—Ç–æ–º",
      "total_domains": 30,
      "pending_count": 5,
      "processing_count": 1,
      "supplier_count": 17,
      "reseller_count": 0,
      "moderation_count": 7,
      "parser_active": false
    }
  ],
  "total": 1
}
```

#### `POST /moderator/current-task/resume-all`
–ù–∞—Ö–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–π run —Å pending –¥–æ–º–µ–Ω–∞–º–∏ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä. –ï—Å–ª–∏ –ø–∞—Ä—Å–µ—Ä —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –∑–∞–ø—É—Å–∫–µ.

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "Started processing 5 domains",
  "run_id": "uuid",
  "parser_run_id": "resume_20260209_195200_abc12345",
  "pending_count": 5,
  "already_running": false
}
```

**–§–∞–π–ª:** `backend/app/transport/routers/current_task.py`

---

## üîß –£–ª—É—á—à–µ–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞ (09.02.2026)

### 12. **–í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø—É—Ç–∏ –≤ common_paths**
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–î–æ–±–∞–≤–ª–µ–Ω—ã –≤–ª–æ–∂–µ–Ω–Ω—ã–µ URL-–ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è HTTP –∏ Playwright —Å—Ç—Ä–∞—Ç–µ–≥–∏–π:
- `/about/requisites`, `/about/contacts`, `/about/company`
- `/pages/requisites`, `/pages/contacts`, `/pages/about`

–£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã—Ö URL —Å 8 –¥–æ 15.

**–§–∞–π–ª:** `domain_info_parser/parser.py`

---

## üìä –°—Ç–∞—Ç—É—Å —Å–±–æ—Ä–∫–∏

- **–î–∞—Ç–∞:** 09.02.2026 19:45
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ
- **Build time:** ~10 —Å–µ–∫—É–Ω–¥ (Turbopack)
- **Routes:** 46 —Å—Ç—Ä–∞–Ω–∏—Ü
- **Server:** http://localhost:3000

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- Next.js 16.1.4 (Turbopack)
- React 18+
- TypeScript
- Tailwind CSS
- shadcn/ui components
- React Query (TanStack Query)

### API endpoints:
- `GET /parsing/runs/{runId}` ‚Äî –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥–æ–Ω–∞
- `GET /domain-parser/status/{parserRunId}` ‚Äî —Å—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–µ—Ä–∞ (—Å fallback –∏–∑ –ë–î)
- `POST /domain-parser/extract-batch` ‚Äî –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞
- `POST /learning/learn-manual-inn` ‚Äî —Ä—É—á–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
- `GET /moderator/current-task` ‚Äî —Ç–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞
- `GET /moderator/unprocessed-runs` ‚Äî –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏
- `POST /moderator/current-task/resume-all` ‚Äî –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É
- `POST /moderator/current-task/{run_id}/start-domain-parser` ‚Äî –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ run

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã:
- **Parsing runs page:** `frontend/.../app/parsing-runs/[runId]/page.tsx`
- **Moderator dashboard:** `frontend/.../app/moderator/page-optimized.tsx`
- **Current task block:** `frontend/.../components/current-task-block.tsx`
- **Current task hooks:** `frontend/.../hooks/queries/current-task.ts`
- **API client:** `frontend/.../lib/api.ts`
- **Backend current task:** `backend/app/transport/routers/current_task.py`
- **Backend domain parser:** `backend/app/transport/routers/domain_parser.py`
- **Parser engine:** `domain_info_parser/parser.py`

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```bash
# –°–±–æ—Ä–∫–∞
cd D:\b2b\frontend\moderator-dashboard-ui
npm run build

# –ó–∞–ø—É—Å–∫ (—á–µ—Ä–µ–∑ B2BLauncher)
D:\b2b\B2BLauncher.exe

# –ü—Ä–æ–≤–µ—Ä–∫–∞
# 1. http://localhost:3000/moderator ‚Äî –±–ª–æ–∫ ¬´–û—á–µ—Ä–µ–¥—å –æ–±—Ä–∞–±–æ—Ç–∫–∏¬ª —Å –∫–Ω–æ–ø–∫–æ–π ¬´–í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å¬ª
# 2. http://localhost:3000/parsing-runs/{runId} ‚Äî extractionLog —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ F5
# 3. –ö–Ω–æ–ø–∫–∞ ¬´–í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å¬ª –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ run
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** –î–∞–Ω–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î (`run_domains.attempted_urls`) –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ API fallback
2. **409 Conflict:** –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –ò–ù–ù –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è gracefully ‚Äî –¥–æ–º–µ–Ω –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –ø–æ—Å—Ç–∞–≤—â–∏–∫—É
3. **–û—á–µ—Ä–µ–¥—å –æ–±—Ä–∞–±–æ—Ç–∫–∏:** –ü–∞—Ä—Å–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç runs –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (FIFO), –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É
4. **Frontend production mode:** –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `next start`, —Ç—Ä–µ–±—É–µ—Ç `npm run build` –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
5. **Backend auto-restart:** B2BLauncher –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç backend –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏
