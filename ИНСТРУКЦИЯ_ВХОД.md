# üîê –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤—Ö–æ–¥–∞ –≤ B2B –ü–ª–∞—Ç—Ñ–æ—Ä–º—É

## –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

‚úÖ **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.–ü–∞—Å–ø–æ—Ä—Ç** - —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –≤—Ö–æ–¥–∞.

---

## üöÄ –ö–∞–∫ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
```
http://localhost:3000/login
```

### –®–∞–≥ 2: –í—ã —É–≤–∏–¥–∏—Ç–µ
- üîµ –õ–æ–≥–æ—Ç–∏–ø B2B –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã
- üìä –°—Ç–∞—Ç—É—Å—ã: Backend –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ –Ø–Ω–¥–µ–∫—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- üî¥ –ë–æ–ª—å—à–∞—è –∫—Ä–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.–ü–∞—Å–ø–æ—Ä—Ç"

### –®–∞–≥ 3: –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É
–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –≤–∞—Å –Ω–∞ **–Ø–Ω–¥–µ–∫—Å.–ü–∞—Å–ø–æ—Ä—Ç** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

### –®–∞–≥ 4: –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ –Ø–Ω–¥–µ–∫—Å–µ
1. –í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω (email –∏–ª–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞)
2. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞)

### –®–∞–≥ 5: –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø
–Ø–Ω–¥–µ–∫—Å –ø–æ–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, —Ä–∞–∑—Ä–µ—à–∞–µ—Ç–µ –ª–∏ –≤—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:
- üìß –ü–æ–ª—É—á–∏—Ç—å –≤–∞—à email
- üë§ –ü–æ–ª—É—á–∏—Ç—å –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úâÔ∏è –î–æ—Å—Ç—É–ø –∫ IMAP –∏ SMTP (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—á—Ç–æ–π)

–ù–∞–∂–º–∏—Ç–µ **"–†–∞–∑—Ä–µ—à–∏—Ç—å"**

### –®–∞–≥ 6: –ì–æ—Ç–æ–≤–æ! üéâ
–í—ã –±—É–¥–µ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –≤:
- **–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä-–ø–∞–Ω–µ–ª—å** (`/moderator`) - –µ—Å–ª–∏ –≤—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- **–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç** (`/cabinet`) - –µ—Å–ª–∏ –≤—ã –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

---

## üìä –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å—Ç–∞—Ç—É—Å—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—Ö–æ–¥–∞

### ‚úÖ Backend –ø–æ–¥–∫–ª—é—á–µ–Ω (–∑–µ–ª–µ–Ω—ã–π)
–û–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.

**–ï—Å–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—Ä–∞—Å–Ω—ã–π:**
- ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ backend
- ‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `NEXT_PUBLIC_API_URL`

### ‚úÖ –Ø–Ω–¥–µ–∫—Å OAuth –Ω–∞—Å—Ç—Ä–æ–µ–Ω (—Å–∏–Ω–∏–π)
–û–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—Å–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ø–Ω–¥–µ–∫—Å–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**–ï—Å–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∂–µ–ª—Ç—ã–π:**
- ‚ö†Ô∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ø–Ω–¥–µ–∫—Å–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ `.env.local`
- ‚ö†Ô∏è –ù–∞–∂–º–∏—Ç–µ F5 –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

---

## üë• –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä)
Email: `edwatik@yandex.ru`

–ü—Ä–∏ –≤—Ö–æ–¥–µ —Å —ç—Ç–æ–≥–æ email –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ –≤–∏–¥–∏—Ç:
- –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä-–ø–∞–Ω–µ–ª—å
- –í—Å–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
–õ—é–±–æ–π –¥—Ä—É–≥–æ–π email –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫:
- –õ–∏—á–Ω–æ–º—É –∫–∞–±–∏–Ω–µ—Ç—É
- –ü—Ä–æ—Ñ–∏–ª—é
- –û—Å–Ω–æ–≤–Ω–æ–º—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –í: –ó–∞–±—ã–ª –ø–∞—Ä–æ–ª—å –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞
**–û:** –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://passport.yandex.ru –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–æ–ª—å —Ç–∞–º. –ó–∞—Ç–µ–º –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ —Å–Ω–æ–≤–∞.

### –í: –ú–æ–π email –Ω–µ –≤ —Å–∏—Å—Ç–µ–º–µ
**–û:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å. –ü—Ä–æ—Å—Ç–æ –≤–æ–π–¥–∏—Ç–µ, –∏ –≤—Å–µ –≥–æ—Ç–æ–≤–æ!

### –í: –û—à–∏–±–∫–∞ "Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
**–û:** 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ backend
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ ngrok —Ç—É–Ω–Ω–µ–ª—å –∞–∫—Ç–∏–≤–µ–Ω
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É

### –í: –û—à–∏–±–∫–∞ "–Ø–Ω–¥–µ–∫—Å –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
**–û:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env.local`
2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (npm run dev)
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+Del)

### –í: –ù–µ –º–æ–≥—É –≤–æ–π—Ç–∏, –≥–æ–≤–æ—Ä–∏—Ç "access_denied"
**–û:** –í—ã –æ—Ç–∫–∞–∑–∞–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–∞–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏ –Ω–∞–∂–º–∏—Ç–µ "–†–∞–∑—Ä–µ—à–∏—Ç—å".

### –í: –ü–æ—á–µ–º—É —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å?
**–û:** –≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ, —á–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ. –Ø–Ω–¥–µ–∫—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ email.

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ü–∞—Ä–æ–ª–∏ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è OAuth 2.0 —Å—Ç–∞–Ω–¥–∞—Ä—Ç
- ‚úÖ –í—Å–µ —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö cookies
- ‚úÖ CSRF –∑–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫
- ‚úÖ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env.local`)
```env
YANDEX_CLIENT_ID=f13aa94092e74191ab90ac908df3c42b
YANDEX_CLIENT_SECRET=170746997c17407bb388dd7872d2666a
YANDEX_REDIRECT_URI=http://localhost:3000/api/yandex/callback
YANDEX_SCOPE=login:email login:info mail:imap_full mail:smtp
```

### API Endpoints

**–ò–Ω–∏—Ü–∏–∞—Ü–∏—è –≤—Ö–æ–¥–∞:**
```
GET /api/yandex/login
‚Üí –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –Ø–Ω–¥–µ–∫—Å OAuth
```

**Callback –æ—Ç –Ø–Ω–¥–µ–∫—Å–∞:**
```
GET /api/yandex/callback?code=XXX&state=XXX
‚Üí –û–±–º–µ–Ω–∏–≤–∞–µ—Ç –∫–æ–¥ –Ω–∞ —Ç–æ–∫–µ–Ω
‚Üí –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚Üí –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –∫–∞–±–∏–Ω–µ—Ç
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
```
GET /api/yandex/config
‚Üí –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç {yandexOAuthEnabled: true/false}
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—Ö–æ–¥–∞
2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+Del)
4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (npm run dev)
5. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É: edwatik@yandex.ru

---

**–í–µ—Ä—Å–∏—è:** 1.0 (–¢–æ–ª—å–∫–æ –Ø–Ω–¥–µ–∫—Å OAuth)  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2026-02-07
